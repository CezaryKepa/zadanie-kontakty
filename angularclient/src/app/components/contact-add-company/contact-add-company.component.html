<form (ngSubmit)="onSubmit()" #companyForm="ngForm">
  <div class="row justify-content-center align-items-center">
    <h1>Dodaj kotakt</h1>
  </div>
  <hr/>
  <div class="row">
    <h2>Rodzaj kontaktu</h2>
    <div class="col-sm-6">
      <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1" [routerLink]="[ '/add-person']" >
      <label class="form-check-label" for="inlineRadio1">Osoba fizyczna</label>
    </div>
    <div class="col-sm-6">
      <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2" [routerLink]="[ '/add-company']" checked>
      <label class="form-check-label" for="inlineRadio2">Firma</label>
    </div>
  </div>
  <hr/>
  <div class="row">

    <div class="col-sm-6">
      <h2>Dane ogólne</h2>
      <div class="form-group">
        <label for="name">Nazwa firmy</label>
        <input type="text" class="form-control"  id="name"  [(ngModel)]="company.name" name="name" required  #name="ngModel">
        <div [hidden]="name.valid || name.pristine"
             class="alert alert-danger">
          Nazwa jest obowiązkowa.
        </div>
      </div>
      <div class="form-group">
        <label for="nip">NIP</label>
        <input type="text" class="form-control"  id="nip" [(ngModel)]="company.nip"   name="nip" >
      </div>
      <div class="form-group">
        <label for="regon">Regon</label>
        <input type="text" class="form-control" id="regon"  [(ngModel)]="company.regon" name="regon">
      </div>
      <div class="form-group">
        <label for="krs">KRS</label>
        <input type="text" class="form-control" id="krs"  [(ngModel)]="company.krs" name="krs">
      </div>
      <div class="form-group">
        <label for="legalForm">Forma prawna</label>
        <select id="legalForm" class="form-control" [(ngModel)]="company.legalForm" name="legalForm">
          <option>spółka akcyjna</option>
          <option>spółka cywilna</option>
          <option>spółka prawna</option>
          <option>spółka z.o.o</option>
          <option>inne</option>
        </select>
      </div>
      <div class="form-group">
        <label for="phone">Telefon</label>
        <input type="text" class="form-control" id="phone" [(ngModel)]="company.phone" name="phone" >
      </div>
      <div class="form-group">
        <label for="email">Email</label>
        <input type="email" class="form-control" id="email"  [(ngModel)]="company.email" name="email" #email="ngModel" email required>
        <div [hidden]="email.valid || email.pristine"
             class="alert alert-danger">
          Nieprawidłowy E-mail.
        </div>
      </div>
      <div class="form-group">
        <label for="additionalInfo">Informacje dodatkowe</label>
        <textarea name="additionalInfo" [(ngModel)]="company.additionalInfo" id="additionalInfo" class="form-control" rows="5" ></textarea>
      </div>

    </div>
  </div>
  <hr/>
  <div class="row">
    <h2>Adres</h2>
    <div class="col-12">
      <table class="table ">
        <tbody>
        <tr *ngFor="let address of company.addresses">
          <td><p class="font-weight-bold">{{ address.name }}</p>
            <p>{{ address.street }} {{ address.buildingNumber }}/{{ address.apartmentNumber }}</p>
            <p>{{ address.zip }} {{ address.city }}</p></td>
        </tr>
        </tbody>
      </table>
    </div>
    <div class="col-sm-8">
      <div class="form-group">
        <label for="addressName">Nazwa typu adresu</label>
        <input type="text" class="form-control" id="addressName"  [(ngModel)]="address.name" name="addressName">
      </div>
      <div class="row">
        <div class="col-sm-6">
          <div class="form-group">
            <label for="street">Ulica</label>
            <input type="text" class="form-control" id="street"  [(ngModel)]="address.street" name="street">
          </div>
        </div>
        <div class="col-sm-3">
          <div class="form-group">
            <label for="house-number">Nr domu</label>
            <input type="text" class="form-control" id="house-number"  [(ngModel)]="address.buildingNumber" name="buildingNumber">
          </div>
        </div>
        <div class="col-sm-3">
          <div class="form-group">
            <label for="apartament-number">Nr mieszkania</label>
            <input type="text" class="form-control" id="apartament-number"  [(ngModel)]="address.apartmentNumber" name="apartament-number">
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-3">
          <div class="form-group">
            <label for="zip">Kod pocztowy</label>
            <input type="text" class="form-control" id="zip" [(ngModel)]="address.zip" name="zip" mask="00-000">
          </div>
        </div>
        <div class="col-sm-9">
          <div class="form-group">
            <label for="city">Miasto</label>
            <input type="text" class="form-control" id="city"  [(ngModel)]="address.city" name="city">
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-3 offset-md-9">
        <div class="form-group mb-3 mt-3">
          <button  type="submit" class="btn btn-secondary"  (click)="addAddress(address)">Dodaj kolejny adres</button>
          <button  type="submit" class="btn btn-secondary" (click)="deleteAddress()">Usuń</button>
        </div>
      </div>
    </div>

  </div>
  <hr/>
  <div class="row">
    <div class="col-sm-6">
      <div class="form-group col-md-4">
        <label for="wayOfObtaining">Sposób pozyskania</label>
        <select id="wayOfObtaining" class="form-control" [(ngModel)]="company.wayOfObtaining" name="wayOfObtaining">
          <option>rekomendacja</option>
          <option>konferencja i szkolenie</option>
          <option>media spolecznosciowe</option>
          <option>strona www</option>
        </select>
      </div>
    </div>

  </div>
  <div class="row">
    <div class="col-sm-3 offset-md-11 ">
      <div class="form-group mb-3">
        <button  type="submit" class="btn btn-primary" [disabled]="!companyForm.form.valid" (click)="addCompany(company); companyForm.reset()">Zapisz</button>
      </div>
    </div>
  </div>


</form>
